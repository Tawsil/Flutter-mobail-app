# Palestine Martyrs Backend API ๐ต๐ธ

ูุธุงู backend ูุงูู ูุทูุฑ ุจู FastAPI ูุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุดูุฏุงุก ูุงูุฌุฑุญู ูุงูุฃุณุฑู ูู ููุณุทูู.

## ๐ ุงูููุฒุงุช

### ๐ ุงููุตุงุฏูุฉ ูุงูุฃูุงู
- ูุตุงุฏูุฉ JWT ุขููุฉ
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt
- ุญูุงูุฉ CORS ูุญููุฉ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Pydantic

### ๐ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช
- **ุงูุดูุฏุงุก**: ุฅุฏุงุฑุฉ ูุงููุฉ ูุจูุงูุงุช ุงูุดูุฏุงุก
- **ุงูุฌุฑุญู**: ุชุชุจุน ุงูุฌุฑุญู ูุญุงูุงุชูู
- **ุงูุฃุณุฑู**: ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุฃุณุฑู
- **ุงูุฅุญุตุงุฆูุงุช**: ุชูุงุฑูุฑ ููุตูุฉ ูุฑุคู ุชุญููููุฉ

### ๐ฅ๏ธ ููุญุฉ ุงูุฅุฏุงุฑุฉ
- ูุงุฌูุฉ ููุจ ุชูุงุนููุฉ ููุฅุฏุงุฑุฉ
- ุนุฑุถ ุงูุจูุงูุงุช ูู ุฌุฏุงูู ุฏููุงููููุฉ
- ููุชุฑุฉ ูุจุญุซ ูุชูุฏู
- ุฅุญุตุงุฆูุงุช ูุฑุฆูุฉ

### ๐ ุฏุนู ุงูุนูู ุบูุฑ ุงููุชุตู
- ูุฒุงููุฉ ุชููุงุฆูุฉ ูุน ุงูุชุทุจูู
- ุฏุนู ุงูุนูู offline/online
- ุชุฎุฒูู ูุญูู ูุคูุช

## ๐๏ธ ุงููููู ุงูุชููู

### Backend Stack:
- **FastAPI**: ุฅุทุงุฑ ุนูู API ุณุฑูุน ูุญุฏูุซ
- **PostgreSQL**: ูุงุนุฏุฉ ุจูุงูุงุช ุงุญุชุฑุงููุฉ
- **SQLAlchemy**: ORM ูุชูุฏู ููุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **JWT**: ูุตุงุฏูุฉ ุขููุฉ
- **Pydantic**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### Frontend Integration:
- **Flutter**: ุชุทุจูู ุงููุงุชู ุงููุญููู
- **Dio**: ููุชุจุฉ HTTP ููุงุชุตุงู ุจุงูู API
- **BLoC**: ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ูู Flutter
- **Repository Pattern**: ุชุฌุฑูุฏ ุทุจูุฉ ุงูุจูุงูุงุช

## ๐ ูููู ุงููุดุฑูุน

```
backend/
โโโ main.py              # ุฎุงุฏู FastAPI ุงูุฑุฆูุณู
โโโ models.py            # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ schemas.py           # ูุฎุทุทุงุช ุงูุชุญูู ูู ุงูุจูุงูุงุช
โโโ database.py          # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ config.py            # ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
โโโ requirements.txt     # ุชุจุนูุงุช Python
โโโ Dockerfile          # ููู Docker ูููุดุฑ
โโโ railway.toml        # ุฅุนุฏุงุฏุงุช Railway
โโโ .env.example        # ูุซุงู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ init_db.py          # ุณูุฑูุจุช ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ deploy.sh           # ุณูุฑูุจุช ุงููุดุฑ ุงูุณุฑูุน
โโโ update_url.sh       # ุณูุฑูุจุช ุชุญุฏูุซ URL ูู Flutter
โโโ DEPLOYMENT.md       # ุฏููู ุงููุดุฑ ุงูููุตู
โโโ templates/
    โโโ admin.html      # ููุญุฉ ุงูุฅุฏุงุฑุฉ
    โโโ admin.js        # JavaScript ูููุญุฉ ุงูุฅุฏุงุฑุฉ
```

## ๐ ุงููุดุฑ ุงูุณุฑูุน ุนูู Railway

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ:
1. ุญุณุงุจ GitHub
2. ุญุณุงุจ Railway
3. Git CLI

### ุฎุทูุงุช ุงููุดุฑ:

#### 1. ุฅุนุฏุงุฏ Railway
```bash
# ุชุซุจูุช Railway CLI
npm install -g @railway/cli

# ุชุณุฌูู ุงูุฏุฎูู
railway login

# ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
railway init

# ุฑุจุท ูุน GitHub repo
railway link
```

#### 2. ุฅุถุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุฅุถุงูุฉ PostgreSQL
railway add postgresql
```

#### 3. ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
railway variables set JWT_SECRET_KEY="your-super-secret-jwt-key-2024"
railway variables set DEBUG="False"
railway variables set EMAIL_HOST="smtp.gmail.com"
railway variables set EMAIL_PORT="587"
railway variables set EMAIL_USER="your-email@gmail.com"
railway variables set EMAIL_PASS="your-app-password"
```

#### 4. ูุดุฑ ุงูุชุทุจูู
```bash
railway up
```

#### 5. ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุจุนุฏ ุงููุดุฑุ ุงุฐูุจ ุฅูู:
```
https://your-app-url.railway.app/init-db
```

## ๐ง API Endpoints

### ุงููุตุงุฏูุฉ
- `POST /auth/login` - ุชุณุฌูู ุงูุฏุฎูู
- `POST /admin/register` - ุชุณุฌูู ูุฏูุฑ ุฌุฏูุฏ

### ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช
- `GET /martyrs` - ูุงุฆูุฉ ุงูุดูุฏุงุก
- `POST /martyrs` - ุฅุถุงูุฉ ุดููุฏ ุฌุฏูุฏ
- `PUT /martyrs/{id}` - ุชุญุฏูุซ ุจูุงูุงุช ุดููุฏ
- `DELETE /martyrs/{id}` - ุญุฐู ุดููุฏ

- `GET /injured` - ูุงุฆูุฉ ุงูุฌุฑุญู
- `POST /injured` - ุฅุถุงูุฉ ุฌุฑูุญ ุฌุฏูุฏ
- `PUT /injured/{id}` - ุชุญุฏูุซ ุจูุงูุงุช ุฌุฑูุญ
- `DELETE /injured/{id}` - ุญุฐู ุฌุฑูุญ

- `GET /prisoners` - ูุงุฆูุฉ ุงูุฃุณุฑู
- `POST /prisoners` - ุฅุถุงูุฉ ุฃุณูุฑ ุฌุฏูุฏ
- `PUT /prisoners/{id}` - ุชุญุฏูุซ ุจูุงูุงุช ุฃุณูุฑ
- `DELETE /prisoners/{id}` - ุญุฐู ุฃุณูุฑ

### ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
- `GET /stats` - ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- `GET /health` - ูุญุต ุตุญุฉ ุงูุฎุงุฏู

### ููุญุฉ ุงูุฅุฏุงุฑุฉ
- `GET /admin` - ุงููุตูู ูููุญุฉ ุงูุฅุฏุงุฑุฉ

## ๐ฑ ุชุญุฏูุซ ุชุทุจูู Flutter

ุจุนุฏ ุงููุดุฑุ ูู ุจุชุญุฏูุซ URL ูู ุงูุชุทุจูู:

```dart
// ูู lib/services/api_service.dart
static const String baseUrl = 'https://your-railway-app-url.railway.app';
```

ุฃู ุงุณุชุฎุฏู ุงูุณูุฑูุจุช ุงููุณุงุนุฏ:
```bash
./update_url.sh https://your-railway-app-url.railway.app
```

## ๐ ููุญุฉ ุงูุฅุฏุงุฑุฉ

### ุงููุตูู:
ุงุฐูุจ ุฅูู: `https://your-app-url.railway.app/admin`

### ุงููุนูููุงุช ุงูุงูุชุฑุงุถูุฉ:
- **ุงุณู ุงููุณุชุฎุฏู**: admin
- **ูููุฉ ุงููุฑูุฑ**: admin123
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: admin@palestine-martyrs.org

### ุงูููุฒุงุช:
- ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช ูู ุฌุฏุงูู ุชูุงุนููุฉ
- ููุชุฑุฉ ูุจุญุซ ูุชูุฏู
- ุฅุญุตุงุฆูุงุช ูุฑุฆูุฉ
- ุฅุถุงูุฉ ูุชุนุฏูู ุงูุจูุงูุงุช
- ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ

## ๐ ุงูุฃูุงู

### ุฅุนุฏุงุฏุงุช ุงูุญูุงูุฉ:
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt
- ูุตุงุฏูุฉ JWT ูุน ุงูุชูุงุก ุตูุงุญูุฉ
- ุงูุชุญูู ูู ุตุญุฉ ุฌููุน ุงููุฏุฎูุงุช
- ุญูุงูุฉ CORS ูุญููุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุขููุฉ

### ูุตุงุฆุญ ุงูุฃูุงู:
1. ุบููุฑ JWT_SECRET_KEY ูู ุงูุฅูุชุงุฌ
2. ุงุณุชุฎุฏู HTTPS ุฏุงุฆูุงู
3. ูู ุจุชุญุฏูุซ ูููุฉ ูุฑูุฑ ุงููุฏูุฑ ุงูุงูุชุฑุงุถูุฉ
4. ุฑุงูุจ ุงูุณุฌูุงุช ุจุงูุชุธุงู
5. ุงุญุชูุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงููุฑุงูุจุฉ ูุงูุตูุงูุฉ

### Health Check:
```bash
curl https://your-app-url.railway.app/health
```

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก:
- Railway ุชููุฑ ูุฑุงูุจุฉ ุชููุงุฆูุฉ
- ุณุฌูุงุช ููุตูุฉ ูุฌููุน ุงูุนูููุงุช
- ุชูุจููุงุช ุนูุฏ ุญุฏูุซ ุฃุฎุทุงุก

### ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:
- Railway ุชููุฑ ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ ูู PostgreSQL
- ูููุตุญ ุจุฅุนุฏุงุฏ ูุณุฎ ุงุญุชูุงุทูุฉ ุฅุถุงููุฉ

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง:

#### 1. ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
railway logs
```
ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูุงูู DATABASE_URL

#### 2. ุฃุฎุทุงุก ุงููุตุงุฏูุฉ:
ุชุฃูุฏ ูู JWT_SECRET_KEY ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

#### 3. ูุดุงูู CORS:
ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS ูู main.py

## ๐ค ุงููุณุงููุฉ ูุงูุชุทููุฑ

### ูุชุทูุจุงุช ุงูุชุทููุฑ ุงููุญูู:
```bash
# ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ุฃู
venv\Scripts\activate     # Windows

# ุชุซุจูุช ุงูุชุจุนูุงุช
pip install -r requirements.txt

# ุชุดุบูู ุงูุฎุงุฏู ุงููุญูู
uvicorn main:app --reload
```

### ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ:
1. ุฃุถู ุงููููุฐุฌ ูู `models.py`
2. ุฃุถู ุงููุฎุทุท ูู `schemas.py`
3. ุฃุถู ุงูููุงุท ุงูููุงุฆูุฉ ูู `main.py`
4. ุงุฎุชุจุฑ ุงูู API
5. ุญุฏุซ ุงููุซุงุฆู

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ:
1. ุฑุงุฌุน ุงููุซุงุฆู ุงูุชูุตูููุฉ ูู `DEPLOYMENT.md`
2. ุชุญูู ูู ุงูุณุฌูุงุช ุจุงุณุชุฎุฏุงู `railway logs`
3. ุฑุงุฌุน ุงูู API docs ูู `/docs`

---

**ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ุจูุงุณุทุฉ MiniMax Agent ูุฎุฏูุฉ ุงููุถูุฉ ุงูููุณุทูููุฉ** ๐ต๐ธ